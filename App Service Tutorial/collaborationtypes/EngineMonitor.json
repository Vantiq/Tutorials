{
  "active" : true,
  "appType" : true,
  "ars_properties" : {
    "dataVersion" : 5,
    "graph" : {
      "lastZoomRequest" : 3,
      "scale" : 1.5858067097979056,
      "translate" : [ 175.6278846795171, 54.33865804041886 ]
    },
    "groupSettings" : {
      "appGroupOpenHash" : {
        "actions" : true,
        "filters" : true,
        "flowControl" : true,
        "modifiers" : true
      },
      "ctGroupOpenHash" : {
        "actions" : true,
        "mobile" : true
      },
      "ctServiceOpen" : false,
      "serviceGroupOpenHash" : { }
    },
    "propertyWidth" : 521
  },
  "ars_relationships" : [ ],
  "assembly" : {
    "EngineData" : {
      "configuration" : {
        "childStreams" : [ "TransformHUD" ],
        "parentStreams" : [ "TransformEngineData" ],
        "topic" : "/com.vantiq.engines/EngineData"
      },
      "pattern" : "PublishToTopic",
      "uuid" : "7deaefa6-b3b7-433c-8ea5-6587128a602f"
    },
    "EngineStatus" : {
      "configuration" : {
        "parentStreams" : [ "TransformHUD" ],
        "topic" : "/com.vantiq.engines/EngineStatus"
      },
      "pattern" : "PublishToTopic",
      "uuid" : "cdd0c114-7a2b-4fd3-8a07-0b1c21f223d5"
    },
    "Join" : {
      "configuration" : {
        "childStreams" : [ "TransformEngineData" ],
        "constraints" : [ {
          "type" : "VAIL Expression",
          "value" : "TempReading.systemId == SpeedReading.systemId"
        } ],
        "parentStreams" : [ "SpeedReading", "TempReading" ],
        "upsert" : false,
        "withinDuration" : "1 second"
      },
      "pattern" : "Join",
      "uuid" : "6133664f-d75d-46bb-b746-c3bc38b86700"
    },
    "SpeedReading" : {
      "configuration" : {
        "childStreams" : [ "Join" ],
        "condition" : "",
        "inboundResource" : "types",
        "inboundResourceId" : "com.vantiq.engines.EngineSpeed",
        "op" : "INSERT",
        "parentStreams" : [ ],
        "schema" : "com.vantiq.engines.EngineSpeed",
        "upsert" : false
      },
      "pattern" : "EventStream",
      "uuid" : "f5aa0625-5d92-4a3d-bc45-cc08494ad5e8"
    },
    "TempReading" : {
      "configuration" : {
        "childStreams" : [ "Join" ],
        "condition" : "",
        "inboundResource" : "types",
        "inboundResourceId" : "com.vantiq.engines.EngineTemp",
        "op" : "INSERT",
        "parentStreams" : [ ],
        "schema" : "com.vantiq.engines.EngineTemp",
        "upsert" : false
      },
      "pattern" : "EventStream",
      "uuid" : "817f64d8-5e24-4424-85ae-21f582453f36"
    },
    "TransformEngineData" : {
      "configuration" : {
        "childStreams" : [ "EngineData" ],
        "parentStreams" : [ "Join" ],
        "transformation" : {
          "speed" : {
            "expression" : "event.SpeedReading.speed",
            "type" : "expression"
          },
          "systemId" : {
            "expression" : "event.SpeedReading.systemId",
            "type" : "expression"
          },
          "temperature" : {
            "expression" : "event.TempReading.temperature",
            "type" : "expression"
          }
        },
        "upsert" : false
      },
      "pattern" : "Transformation",
      "uuid" : "4bc2dadf-23b0-4c3d-8756-9c3678b91edd"
    },
    "TransformHUD" : {
      "configuration" : {
        "VAIL" : "// define the outbound event using the inbound systemId. Assume no alertMsg by default\nvar hudEvent = {\n   systemId: event.value.systemId,\n   alertMsg: \"\"\n}\n\n// check if the machine is speeding and overheating first\nif (event.value.temperature >= 210 && event.value.speed >= 45) {\n   hudEvent.alertMsg = \"Your engine is overheating, please reduce your speed.\"\n} else if (event.value.temperature >= 210) { // check if the machine is overheating while moving slower\n   hudEvent.alertMsg = \"Your engine is overheating: check for a malfunctioning fan or a coolant leak.\"\n}\n\n// overwrite the outbound event value with the new hudEvent\nevent.value = hudEvent",
        "childStreams" : [ "EngineStatus" ],
        "parentStreams" : [ "EngineData" ]
      },
      "pattern" : "VAIL",
      "uuid" : "df0fb570-933d-42ac-9003-e5dc1d168a12"
    }
  },
  "collaboratorRoles" : [ ],
  "compilerOCC" : 6,
  "currentState" : {
    "code" : "success"
  },
  "description" : "false",
  "disableBadging" : false,
  "entityRoles" : [ ],
  "isComponent" : false,
  "keyTypes" : [ "system.collaborations" ],
  "name" : "EngineMonitor",
  "resourceBinding" : {
    "optionalResources" : [ ],
    "requiredResources" : [ {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.UpdateHUD"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.UpdateSystemStatus"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.MergeStreams"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.TempReading"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.TransformHUD"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.Join"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.EngineData"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.SpeedReading"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.TransformEngineData"
    }, {
      "resource" : "system.eventstreams",
      "resourceId" : "apps.EngineMonitor.EngineStatus"
    }, {
      "resource" : "procedures",
      "resourceId" : "apps.EngineMonitor.TransformEngineData"
    }, {
      "resource" : "rules",
      "resourceId" : "apps.EngineMonitor.UpdateSystemStatus"
    }, {
      "resource" : "rules",
      "resourceId" : "apps.EngineMonitor.UpdateHUD"
    }, {
      "resource" : "rules",
      "resourceId" : "apps.EngineMonitor.Join"
    }, {
      "resource" : "rules",
      "resourceId" : "apps.EngineMonitor.TransformEngineData"
    }, {
      "resource" : "rules",
      "resourceId" : "apps.EngineMonitor.EngineData"
    }, {
      "resource" : "rules",
      "resourceId" : "apps.EngineMonitor.EngineStatus"
    } ]
  }
}