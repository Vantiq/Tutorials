{
    "name": "Invoice",
    "targetDevice": "browser",
    "isLaunchable": false,
    "models": {
        "dataObjects": {
            "__GLOBAL__": {
                "properties": {
                    "sumLastFive": {
                        "type": "TypedObject",
                        "defaultLabel": "sumLastFive",
                        "typedObject": {
                            "properties": {
                                "value": {
                                    "type": "Real",
                                    "defaultLabel": "value"
                                }
                            }
                        }
                    }
                }
            },
            "__PARAMETERS__": {
                "properties": {}
            }
        },
        "dataStreams": [
            {
                "v": 1,
                "uuid": "af8a6783-d4cb-4f32-98f9-0ea7c25f8d11",
                "name": "Invoice Queryable",
                "type": 4,
                "updateInterval": 15,
                "maxRecords": 5,
                "isInsertOp": false,
                "isUpdateOp": false,
                "isDeleteOp": false,
                "advancedWhereClause": null,
                "property": null,
                "sortByProperty": "timestamp",
                "sortDescending": true,
                "dataObjectName": null,
                "dataTypeList": [
                    {
                        "type": "Invoice",
                        "label": null,
                        "isSeries": false
                    }
                ],
                "basicQueryElement": []
            },
            {
                "v": 1,
                "uuid": "05a5aea9-d9e4-473a-8b0a-fbd72be027a1",
                "name": "Invoice Sum",
                "type": 5,
                "updateInterval": 60,
                "maxRecords": 0,
                "isInsertOp": false,
                "isUpdateOp": false,
                "isDeleteOp": false,
                "advancedWhereClause": null,
                "sortByProperty": null,
                "sortDescending": false,
                "dataObjectName": "client.data.sumLastFive",
                "dataTypeList": []
            }
        ]
    },
    "views": {
        "Start": {
            "fields": [],
            "bodyChildren": [
                {
                    "type": "GridContainer",
                    "v": 13,
                    "name": "GridLayout1",
                    "x": 0,
                    "y": 0,
                    "h": 430,
                    "w": 261,
                    "borderWidth": 2,
                    "borderColor": "Default",
                    "heightPolicy": 0,
                    "widthPolicy": 0,
                    "isSelectable": true,
                    "isDraggable": true,
                    "actionMenuTopic": null,
                    "actionMenuLabel": null,
                    "vertGravity": 4,
                    "horzGravity": 4,
                    "CSSClass": "vantiqGridLayout",
                    "innerMargin": 20,
                    "vertMargin": 10,
                    "horzMargin": 10,
                    "rows": 6,
                    "columns": 2,
                    "kids": [
                        {
                            "type": "TextLabel",
                            "v": 13,
                            "name": "StaticText8",
                            "x": 10,
                            "y": 24.5,
                            "h": 25,
                            "w": 67,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 0,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 0,
                            "column": 0,
                            "vertGravity": 4,
                            "horzGravity": 0,
                            "CSSClass": "vantiqStaticText",
                            "text": "Amount",
                            "fontSize": 20,
                            "fontFace": "inherit",
                            "fontStyle": "normal",
                            "fontWeight": "normal"
                        },
                        {
                            "type": "PIInputReal",
                            "v": 13,
                            "name": "InputReal1",
                            "x": 126,
                            "y": 10,
                            "h": 54,
                            "w": 121,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 2,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 0,
                            "column": 1,
                            "vertGravity": 4,
                            "horzGravity": 0,
                            "binding": "page.data.Invoice.amount",
                            "CSSClass": "vantiqInputReal",
                            "innerMargin": 0,
                            "vertMargin": 10,
                            "horzMargin": 10,
                            "label": "",
                            "labelFontSize": 14,
                            "labelAlign": "center",
                            "labelStyle": "plain",
                            "labelColor": "#000000",
                            "placeholder": "",
                            "optional": true,
                            "flavor": "text",
                            "units": "",
                            "minValue": 0,
                            "maxValue": 100,
                            "default": 0
                        },
                        {
                            "type": "TextLabel",
                            "v": 13,
                            "name": "StaticText9",
                            "x": 10,
                            "y": 98.5,
                            "h": 25,
                            "w": 96,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 0,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 1,
                            "column": 0,
                            "vertGravity": 4,
                            "horzGravity": 0,
                            "CSSClass": "vantiqStaticText",
                            "text": "Description",
                            "fontSize": 20,
                            "fontFace": "inherit",
                            "fontStyle": "normal",
                            "fontWeight": "normal"
                        },
                        {
                            "type": "PIInputString",
                            "v": 13,
                            "name": "InputString1",
                            "x": 126,
                            "y": 84,
                            "h": 54,
                            "w": 121,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 2,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 1,
                            "column": 1,
                            "vertGravity": 4,
                            "horzGravity": 0,
                            "binding": "page.data.Invoice.description",
                            "CSSClass": "vantiqInputString",
                            "innerMargin": 0,
                            "vertMargin": 10,
                            "horzMargin": 10,
                            "label": "",
                            "labelFontSize": 14,
                            "labelAlign": "center",
                            "labelStyle": "plain",
                            "labelColor": "#000000",
                            "placeholder": "",
                            "optional": true,
                            "default": "",
                            "isPassword": false
                        },
                        {
                            "type": "TextLabel",
                            "v": 13,
                            "name": "StaticText10",
                            "x": 10,
                            "y": 172.5,
                            "h": 25,
                            "w": 90,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 0,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 2,
                            "column": 0,
                            "vertGravity": 4,
                            "horzGravity": 0,
                            "CSSClass": "vantiqStaticText",
                            "text": "First Name",
                            "fontSize": 20,
                            "fontFace": "inherit",
                            "fontStyle": "normal",
                            "fontWeight": "normal"
                        },
                        {
                            "type": "PIInputString",
                            "v": 13,
                            "name": "InputString2",
                            "x": 126,
                            "y": 158,
                            "h": 54,
                            "w": 121,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 2,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 2,
                            "column": 1,
                            "vertGravity": 4,
                            "horzGravity": 0,
                            "binding": "page.data.Invoice.firstName",
                            "CSSClass": "vantiqInputString",
                            "innerMargin": 0,
                            "vertMargin": 10,
                            "horzMargin": 10,
                            "label": "",
                            "labelFontSize": 14,
                            "labelAlign": "center",
                            "labelStyle": "plain",
                            "labelColor": "#000000",
                            "placeholder": "",
                            "optional": true,
                            "default": "",
                            "isPassword": false
                        },
                        {
                            "type": "TextLabel",
                            "v": 13,
                            "name": "StaticText12",
                            "x": 10,
                            "y": 246.5,
                            "h": 25,
                            "w": 88,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 0,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 3,
                            "column": 0,
                            "vertGravity": 4,
                            "horzGravity": 0,
                            "CSSClass": "vantiqStaticText",
                            "text": "Last Name",
                            "fontSize": 20,
                            "fontFace": "inherit",
                            "fontStyle": "normal",
                            "fontWeight": "normal"
                        },
                        {
                            "type": "PIInputString",
                            "v": 13,
                            "name": "InputString4",
                            "x": 126,
                            "y": 232,
                            "h": 54,
                            "w": 121,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 2,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 3,
                            "column": 1,
                            "vertGravity": 4,
                            "horzGravity": 0,
                            "binding": "page.data.Invoice.lastName",
                            "CSSClass": "vantiqInputString",
                            "innerMargin": 0,
                            "vertMargin": 10,
                            "horzMargin": 10,
                            "label": "",
                            "labelFontSize": 14,
                            "labelAlign": "center",
                            "labelStyle": "plain",
                            "labelColor": "#000000",
                            "placeholder": "",
                            "optional": true,
                            "default": "",
                            "isPassword": false
                        },
                        {
                            "type": "PIInlineButton",
                            "v": 13,
                            "name": "SubmitBtn",
                            "x": 10,
                            "y": 306,
                            "h": 50,
                            "w": 96,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 2,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 4,
                            "column": 0,
                            "vertGravity": 4,
                            "horzGravity": 4,
                            "CSSClass": "vantiqButton",
                            "innerMargin": 0,
                            "vertMargin": 10,
                            "horzMargin": 10,
                            "label": "",
                            "labelFontSize": 14,
                            "labelAlign": "center",
                            "labelStyle": "plain",
                            "labelColor": "#000000",
                            "buttonLabel": "Submit",
                            "value": 100,
                            "buttonLabelSize": 18,
                            "buttonLabelStyle": "plain",
                            "buttonLabelColor": "platform",
                            "buttonBackgroundColor": "platform"
                        },
                        {
                            "type": "PIInlineButton",
                            "v": 13,
                            "name": "ResetBtn",
                            "x": 126,
                            "y": 306,
                            "h": 50,
                            "w": 121,
                            "borderWidth": 0,
                            "borderColor": "Default",
                            "heightPolicy": 0,
                            "widthPolicy": 2,
                            "isSelectable": true,
                            "isDraggable": true,
                            "actionMenuTopic": null,
                            "actionMenuLabel": null,
                            "row": 4,
                            "column": 1,
                            "vertGravity": 4,
                            "horzGravity": 4,
                            "CSSClass": "vantiqButton",
                            "innerMargin": 0,
                            "vertMargin": 10,
                            "horzMargin": 10,
                            "label": "",
                            "labelFontSize": 14,
                            "labelAlign": "center",
                            "labelStyle": "plain",
                            "labelColor": "#000000",
                            "buttonLabel": "Reset Form",
                            "value": 100,
                            "buttonLabelSize": 18,
                            "buttonLabelStyle": "plain",
                            "buttonLabelColor": "platform",
                            "buttonBackgroundColor": "platform"
                        }
                    ]
                },
                {
                    "type": "DataTableWidget",
                    "v": 13,
                    "name": "DataTable1",
                    "x": 284,
                    "y": 0,
                    "h": 294,
                    "w": 863,
                    "borderWidth": 2,
                    "borderColor": "Default",
                    "heightPolicy": 0,
                    "widthPolicy": 1,
                    "isSelectable": true,
                    "isDraggable": true,
                    "actionMenuTopic": null,
                    "actionMenuLabel": null,
                    "vertGravity": 4,
                    "horzGravity": 4,
                    "CSSClass": "vantiqDataTable",
                    "dataType": null,
                    "propertyName": null,
                    "operation": "insert",
                    "dataStreamUUID": "af8a6783-d4cb-4f32-98f9-0ea7c25f8d11",
                    "dataStreamPropertyList": [],
                    "dataStreamGroupedByFiltersString": "",
                    "rowsPerPage": 5,
                    "headerFontSize": 14,
                    "headerFontStyle": "plain",
                    "headerFontColor": "#000000",
                    "headerFontFace": "inherit",
                    "cellFontSize": 14,
                    "cellFontStyle": "plain",
                    "cellFontColor": "#000000",
                    "cellFontFace": "inherit",
                    "columns": [
                        {
                            "propertyName": "ID",
                            "title": "ID",
                            "dataType": "String",
                            "selected": false,
                            "colorRules": null
                        },
                        {
                            "propertyName": "amount",
                            "title": "amount",
                            "dataType": "Real",
                            "selected": false,
                            "colorRules": null
                        },
                        {
                            "propertyName": "description",
                            "title": "description",
                            "dataType": "String",
                            "selected": false,
                            "colorRules": null
                        },
                        {
                            "propertyName": "firstName",
                            "title": "firstName",
                            "dataType": "String",
                            "selected": false,
                            "colorRules": null
                        },
                        {
                            "propertyName": "lastName",
                            "title": "lastName",
                            "dataType": "String",
                            "selected": false,
                            "colorRules": null
                        },
                        {
                            "propertyName": "timestamp",
                            "title": "timestamp",
                            "dataType": "DateTime",
                            "selected": false,
                            "colorRules": null
                        }
                    ]
                },
                {
                    "type": "GaugeWidget",
                    "v": 13,
                    "name": "Gauge1",
                    "x": 553,
                    "y": 320,
                    "h": 292,
                    "w": 292,
                    "borderWidth": 2,
                    "borderColor": "Default",
                    "heightPolicy": 1,
                    "widthPolicy": 1,
                    "isSelectable": true,
                    "isDraggable": true,
                    "actionMenuTopic": null,
                    "actionMenuLabel": null,
                    "vertGravity": 4,
                    "horzGravity": 4,
                    "CSSClass": "vantiqGauge",
                    "dataType": null,
                    "propertyName": "value",
                    "operation": "insert",
                    "dataStreamUUID": "05a5aea9-d9e4-473a-8b0a-fbd72be027a1",
                    "dataStreamPropertyList": [],
                    "dataStreamGroupedByFiltersString": "",
                    "naturalKey": null,
                    "naturalKeyValue": null,
                    "minimum": 0,
                    "maximum": 1000,
                    "minorTicks": 5,
                    "yellowMinimum": 700,
                    "redMinimum": 900
                }
            ],
            "footerChildren": [],
            "responseTopic": "/my/response/topic",
            "layoutType": "browser",
            "data": {
                "properties": {
                    "Invoice": {
                        "type": "TypedObject",
                        "defaultLabel": "Invoice",
                        "typedObject": {
                            "properties": {
                                "ID": {
                                    "type": "String",
                                    "defaultLabel": "ID"
                                },
                                "amount": {
                                    "type": "Real",
                                    "defaultLabel": "amount"
                                },
                                "description": {
                                    "type": "String",
                                    "defaultLabel": "description"
                                },
                                "firstName": {
                                    "type": "String",
                                    "defaultLabel": "firstName"
                                },
                                "lastName": {
                                    "type": "String",
                                    "defaultLabel": "lastName"
                                },
                                "timestamp": {
                                    "type": "DateTime",
                                    "defaultLabel": "timestamp"
                                }
                            },
                            "type": "Invoice"
                        }
                    }
                }
            }
        }
    },
    "controllers": {
        "client": {},
        "page": {
            "Start": {
                "widgets": {
                    "SubmitBtn": {
                        "onClick": " // generateUUID is used to create a unique ID to use as the invoice ID\n    generateUUID = function() {\n        // http://www.ietf.org/rfc/rfc4122.txt\n        var s = [];\n        var hexDigits = \"0123456789abcdef\";\n        for (var i = 0; i < 36; i++)\n        {\n            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n        }\n        s[14] = \"4\";  // bits 12-15 of the time_hi_and_version field to 0010\n        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01\n        s[8] = s[13] = s[18] = s[23] = \"-\";\n\n        var uuid = s.join(\"\");\n        return uuid;\n    };\n\n    if (!page.data.Invoice.lastName || (page.data.Invoice.amount === 0)) {\n        client.errorDialog(\"Please enter Last Name and Amount values!\");\n    } else {\n        // programatically generate a timestamp and ID for our invoice\n        page.data.Invoice.timestamp = new Date().toISOString();\n        page.data.Invoice.ID = generateUUID();\n\n        // create a VANTIQ database connection to insert our new invoice\n        var http = new Http();\n        http.setVantiqUrlForResource(\"Invoice\");\n        http.setVantiqHeaders();\n        http.insert(page.data.Invoice.values, null, function(response) {\n            // the invoice was saved, now query for the last five invoices based on timestamp\n            client.infoDialog(\"Invoice \" + page.data.Invoice.ID + \" submitted.\");\n            var parameters = {\n                \"limit\":5,\n                \"sort\":{\"timestamp\":-1}\n            };\n            http.select(parameters, function(response) {\n                // sum the amounts of the last five invoices\n                client.data.sumLastFive.value = 0;\n                for (var i = 0; i < response.length; i++) {\n                    client.data.sumLastFive.value += response[i].amount;\n                }\n                // create a client event for widgets listening on the Invoice Sum data stream\n                client.sendClientEvent(\"Invoice Sum\", client.data.sumLastFive);\n            }, function(errors) {\n                client.errorDialog(\"Select fails: \" + JSON.stringify(errors));\n            });\n        }, function(errors) {\n            client.errorDialog(\"Submit fails: \" + JSON.stringify(errors));\n        });\n    }"
                    },
                    "ResetBtn": {
                        "onClick": " page.data.Invoice.firstName = page.data.Invoice.lastName = page.data.Invoice.description = \"\";\n    page.data.Invoice.amount = null;"
                    }
                }
            }
        },
        "dataStream": {
            "Invoice Queryable": {},
            "Invoice Sum": {}
        }
    },
    "options": {
        "v": 3,
        "showGridWhileEditing": false,
        "description": "",
        "badgeCount": 0,
        "theme": {
            "v": 2,
            "name": "light",
            "label": "Light",
            "backgroundColor": "#f0f2f5",
            "foregroundColor": "#000000",
            "borderColor": "#000000",
            "accentColor1": "#040fdb"
        }
    }
}