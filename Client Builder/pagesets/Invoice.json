{
  "controllers" : {
    "client" : { },
    "dataStream" : {
      "Invoice Queryable" : { },
      "Invoice Sum" : { }
    },
    "page" : {
      "Start" : {
        "widgets" : {
          "ResetBtn" : {
            "onClick" : " page.data.Invoice.firstName = page.data.Invoice.lastName = page.data.Invoice.description = \"\";\n    page.data.Invoice.amount = null;"
          },
          "SubmitBtn" : {
            "onClick" : " // generateUUID is used to create a unique ID to use as the invoice ID\n    generateUUID = function() {\n        // http://www.ietf.org/rfc/rfc4122.txt\n        var s = [];\n        var hexDigits = \"0123456789abcdef\";\n        for (var i = 0; i < 36; i++)\n        {\n            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n        }\n        s[14] = \"4\";  // bits 12-15 of the time_hi_and_version field to 0010\n        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01\n        s[8] = s[13] = s[18] = s[23] = \"-\";\n\n        var uuid = s.join(\"\");\n        return uuid;\n    };\n\n    if (!page.data.Invoice.lastName || (page.data.Invoice.amount === 0)) {\n        client.errorDialog(\"Please enter Last Name and Amount values!\");\n    } else {\n        // programatically generate a timestamp and ID for our invoice\n        page.data.Invoice.timestamp = new Date().toISOString();\n        page.data.Invoice.ID = generateUUID();\n\n        // create a VANTIQ database connection to insert our new invoice\n        var http = new Http();\n        http.setVantiqUrlForResource(\"Invoice\");\n        http.setVantiqHeaders();\n        http.insert(page.data.Invoice.values, null, function(response) {\n            // the invoice was saved, now query for the last five invoices based on timestamp\n            client.infoDialog(\"Invoice \" + page.data.Invoice.ID + \" submitted.\");\n            var parameters = {\n                \"limit\":5,\n                \"sort\":{\"timestamp\":-1}\n            };\n            http.select(parameters, function(response) {\n                // sum the amounts of the last five invoices\n                client.data.sumLastFive.value = 0;\n                for (var i = 0; i < response.length; i++) {\n                    client.data.sumLastFive.value += response[i].amount;\n                }\n                // create a client event for widgets listening on the Invoice Sum data stream\n                client.sendClientEvent(\"Invoice Sum\", client.data.sumLastFive);\n            }, function(errors) {\n                client.errorDialog(\"Select fails: \" + JSON.stringify(errors));\n            });\n        }, function(errors) {\n            client.errorDialog(\"Submit fails: \" + JSON.stringify(errors));\n        });\n    }"
          }
        }
      }
    }
  },
  "isLaunchable" : false,
  "models" : {
    "dataObjects" : {
      "__GLOBAL__" : {
        "properties" : {
          "sumLastFive" : {
            "defaultLabel" : "sumLastFive",
            "type" : "TypedObject",
            "typedObject" : {
              "properties" : {
                "value" : {
                  "defaultLabel" : "value",
                  "type" : "Real"
                }
              }
            }
          }
        }
      },
      "__PARAMETERS__" : {
        "properties" : { }
      }
    },
    "dataStreams" : [ {
      "advancedWhereClause" : null,
      "basicQueryElement" : [ ],
      "dataObjectName" : null,
      "dataTypeList" : [ {
        "isSeries" : false,
        "label" : null,
        "type" : "Invoice"
      } ],
      "isDeleteOp" : false,
      "isInsertOp" : false,
      "isUpdateOp" : false,
      "maxRecords" : 5,
      "name" : "Invoice Queryable",
      "property" : null,
      "sortByProperty" : "timestamp",
      "sortDescending" : true,
      "type" : 4,
      "updateInterval" : 15,
      "uuid" : "af8a6783-d4cb-4f32-98f9-0ea7c25f8d11",
      "v" : 1
    }, {
      "advancedWhereClause" : null,
      "dataObjectName" : "client.data.sumLastFive",
      "dataTypeList" : [ ],
      "isDeleteOp" : false,
      "isInsertOp" : false,
      "isUpdateOp" : false,
      "maxRecords" : 0,
      "name" : "Invoice Sum",
      "sortByProperty" : null,
      "sortDescending" : false,
      "type" : 5,
      "updateInterval" : 60,
      "uuid" : "05a5aea9-d9e4-473a-8b0a-fbd72be027a1",
      "v" : 1
    } ]
  },
  "name" : "Invoice",
  "options" : {
    "badgeCount" : 0,
    "description" : "",
    "showGridWhileEditing" : false,
    "theme" : {
      "accentColor1" : "#040fdb",
      "backgroundColor" : "#f0f2f5",
      "borderColor" : "#000000",
      "foregroundColor" : "#000000",
      "label" : "Light",
      "name" : "light",
      "v" : 2
    },
    "v" : 3
  },
  "targetDevice" : "browser",
  "views" : {
    "Start" : {
      "bodyChildren" : [ {
        "CSSClass" : "vantiqGridLayout",
        "actionMenuLabel" : null,
        "actionMenuTopic" : null,
        "borderColor" : "Default",
        "borderWidth" : 2,
        "columns" : 2,
        "h" : 430,
        "heightPolicy" : 0,
        "horzGravity" : 4,
        "horzMargin" : 10,
        "innerMargin" : 20,
        "isDraggable" : true,
        "isSelectable" : true,
        "kids" : [ {
          "CSSClass" : "vantiqStaticText",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "borderColor" : "Default",
          "borderWidth" : 0,
          "column" : 0,
          "fontFace" : "inherit",
          "fontSize" : 20,
          "fontStyle" : "normal",
          "fontWeight" : "normal",
          "h" : 25,
          "heightPolicy" : 0,
          "horzGravity" : 0,
          "isDraggable" : true,
          "isSelectable" : true,
          "name" : "StaticText8",
          "row" : 0,
          "text" : "Amount",
          "type" : "TextLabel",
          "v" : 13,
          "vertGravity" : 4,
          "w" : 67,
          "widthPolicy" : 0,
          "x" : 10,
          "y" : 24.5
        }, {
          "CSSClass" : "vantiqInputReal",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "binding" : "page.data.Invoice.amount",
          "borderColor" : "Default",
          "borderWidth" : 0,
          "column" : 1,
          "default" : 0,
          "flavor" : "text",
          "h" : 54,
          "heightPolicy" : 0,
          "horzGravity" : 0,
          "horzMargin" : 10,
          "innerMargin" : 0,
          "isDraggable" : true,
          "isSelectable" : true,
          "label" : "",
          "labelAlign" : "center",
          "labelColor" : "#000000",
          "labelFontSize" : 14,
          "labelStyle" : "plain",
          "maxValue" : 100,
          "minValue" : 0,
          "name" : "InputReal1",
          "optional" : true,
          "placeholder" : "",
          "row" : 0,
          "type" : "PIInputReal",
          "units" : "",
          "v" : 13,
          "vertGravity" : 4,
          "vertMargin" : 10,
          "w" : 121,
          "widthPolicy" : 2,
          "x" : 126,
          "y" : 10
        }, {
          "CSSClass" : "vantiqStaticText",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "borderColor" : "Default",
          "borderWidth" : 0,
          "column" : 0,
          "fontFace" : "inherit",
          "fontSize" : 20,
          "fontStyle" : "normal",
          "fontWeight" : "normal",
          "h" : 25,
          "heightPolicy" : 0,
          "horzGravity" : 0,
          "isDraggable" : true,
          "isSelectable" : true,
          "name" : "StaticText9",
          "row" : 1,
          "text" : "Description",
          "type" : "TextLabel",
          "v" : 13,
          "vertGravity" : 4,
          "w" : 96,
          "widthPolicy" : 0,
          "x" : 10,
          "y" : 98.5
        }, {
          "CSSClass" : "vantiqInputString",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "binding" : "page.data.Invoice.description",
          "borderColor" : "Default",
          "borderWidth" : 0,
          "column" : 1,
          "default" : "",
          "h" : 54,
          "heightPolicy" : 0,
          "horzGravity" : 0,
          "horzMargin" : 10,
          "innerMargin" : 0,
          "isDraggable" : true,
          "isPassword" : false,
          "isSelectable" : true,
          "label" : "",
          "labelAlign" : "center",
          "labelColor" : "#000000",
          "labelFontSize" : 14,
          "labelStyle" : "plain",
          "name" : "InputString1",
          "optional" : true,
          "placeholder" : "",
          "row" : 1,
          "type" : "PIInputString",
          "v" : 13,
          "vertGravity" : 4,
          "vertMargin" : 10,
          "w" : 121,
          "widthPolicy" : 2,
          "x" : 126,
          "y" : 84
        }, {
          "CSSClass" : "vantiqStaticText",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "borderColor" : "Default",
          "borderWidth" : 0,
          "column" : 0,
          "fontFace" : "inherit",
          "fontSize" : 20,
          "fontStyle" : "normal",
          "fontWeight" : "normal",
          "h" : 25,
          "heightPolicy" : 0,
          "horzGravity" : 0,
          "isDraggable" : true,
          "isSelectable" : true,
          "name" : "StaticText10",
          "row" : 2,
          "text" : "First Name",
          "type" : "TextLabel",
          "v" : 13,
          "vertGravity" : 4,
          "w" : 90,
          "widthPolicy" : 0,
          "x" : 10,
          "y" : 172.5
        }, {
          "CSSClass" : "vantiqInputString",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "binding" : "page.data.Invoice.firstName",
          "borderColor" : "Default",
          "borderWidth" : 0,
          "column" : 1,
          "default" : "",
          "h" : 54,
          "heightPolicy" : 0,
          "horzGravity" : 0,
          "horzMargin" : 10,
          "innerMargin" : 0,
          "isDraggable" : true,
          "isPassword" : false,
          "isSelectable" : true,
          "label" : "",
          "labelAlign" : "center",
          "labelColor" : "#000000",
          "labelFontSize" : 14,
          "labelStyle" : "plain",
          "name" : "InputString2",
          "optional" : true,
          "placeholder" : "",
          "row" : 2,
          "type" : "PIInputString",
          "v" : 13,
          "vertGravity" : 4,
          "vertMargin" : 10,
          "w" : 121,
          "widthPolicy" : 2,
          "x" : 126,
          "y" : 158
        }, {
          "CSSClass" : "vantiqStaticText",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "borderColor" : "Default",
          "borderWidth" : 0,
          "column" : 0,
          "fontFace" : "inherit",
          "fontSize" : 20,
          "fontStyle" : "normal",
          "fontWeight" : "normal",
          "h" : 25,
          "heightPolicy" : 0,
          "horzGravity" : 0,
          "isDraggable" : true,
          "isSelectable" : true,
          "name" : "StaticText12",
          "row" : 3,
          "text" : "Last Name",
          "type" : "TextLabel",
          "v" : 13,
          "vertGravity" : 4,
          "w" : 88,
          "widthPolicy" : 0,
          "x" : 10,
          "y" : 246.5
        }, {
          "CSSClass" : "vantiqInputString",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "binding" : "page.data.Invoice.lastName",
          "borderColor" : "Default",
          "borderWidth" : 0,
          "column" : 1,
          "default" : "",
          "h" : 54,
          "heightPolicy" : 0,
          "horzGravity" : 0,
          "horzMargin" : 10,
          "innerMargin" : 0,
          "isDraggable" : true,
          "isPassword" : false,
          "isSelectable" : true,
          "label" : "",
          "labelAlign" : "center",
          "labelColor" : "#000000",
          "labelFontSize" : 14,
          "labelStyle" : "plain",
          "name" : "InputString4",
          "optional" : true,
          "placeholder" : "",
          "row" : 3,
          "type" : "PIInputString",
          "v" : 13,
          "vertGravity" : 4,
          "vertMargin" : 10,
          "w" : 121,
          "widthPolicy" : 2,
          "x" : 126,
          "y" : 232
        }, {
          "CSSClass" : "vantiqButton",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "borderColor" : "Default",
          "borderWidth" : 0,
          "buttonBackgroundColor" : "platform",
          "buttonLabel" : "Submit",
          "buttonLabelColor" : "platform",
          "buttonLabelSize" : 18,
          "buttonLabelStyle" : "plain",
          "column" : 0,
          "h" : 50,
          "heightPolicy" : 0,
          "horzGravity" : 4,
          "horzMargin" : 10,
          "innerMargin" : 0,
          "isDraggable" : true,
          "isSelectable" : true,
          "label" : "",
          "labelAlign" : "center",
          "labelColor" : "#000000",
          "labelFontSize" : 14,
          "labelStyle" : "plain",
          "name" : "SubmitBtn",
          "row" : 4,
          "type" : "PIInlineButton",
          "v" : 13,
          "value" : 100,
          "vertGravity" : 4,
          "vertMargin" : 10,
          "w" : 96,
          "widthPolicy" : 2,
          "x" : 10,
          "y" : 306
        }, {
          "CSSClass" : "vantiqButton",
          "actionMenuLabel" : null,
          "actionMenuTopic" : null,
          "borderColor" : "Default",
          "borderWidth" : 0,
          "buttonBackgroundColor" : "platform",
          "buttonLabel" : "Reset Form",
          "buttonLabelColor" : "platform",
          "buttonLabelSize" : 18,
          "buttonLabelStyle" : "plain",
          "column" : 1,
          "h" : 50,
          "heightPolicy" : 0,
          "horzGravity" : 4,
          "horzMargin" : 10,
          "innerMargin" : 0,
          "isDraggable" : true,
          "isSelectable" : true,
          "label" : "",
          "labelAlign" : "center",
          "labelColor" : "#000000",
          "labelFontSize" : 14,
          "labelStyle" : "plain",
          "name" : "ResetBtn",
          "row" : 4,
          "type" : "PIInlineButton",
          "v" : 13,
          "value" : 100,
          "vertGravity" : 4,
          "vertMargin" : 10,
          "w" : 121,
          "widthPolicy" : 2,
          "x" : 126,
          "y" : 306
        } ],
        "name" : "GridLayout1",
        "rows" : 6,
        "type" : "GridContainer",
        "v" : 13,
        "vertGravity" : 4,
        "vertMargin" : 10,
        "w" : 261,
        "widthPolicy" : 0,
        "x" : 0,
        "y" : 0
      }, {
        "CSSClass" : "vantiqDataTable",
        "actionMenuLabel" : null,
        "actionMenuTopic" : null,
        "borderColor" : "Default",
        "borderWidth" : 2,
        "cellFontColor" : "#000000",
        "cellFontFace" : "inherit",
        "cellFontSize" : 14,
        "cellFontStyle" : "plain",
        "columns" : [ {
          "colorRules" : null,
          "dataType" : "String",
          "propertyName" : "ID",
          "selected" : false,
          "title" : "ID"
        }, {
          "colorRules" : null,
          "dataType" : "Real",
          "propertyName" : "amount",
          "selected" : false,
          "title" : "amount"
        }, {
          "colorRules" : null,
          "dataType" : "String",
          "propertyName" : "description",
          "selected" : false,
          "title" : "description"
        }, {
          "colorRules" : null,
          "dataType" : "String",
          "propertyName" : "firstName",
          "selected" : false,
          "title" : "firstName"
        }, {
          "colorRules" : null,
          "dataType" : "String",
          "propertyName" : "lastName",
          "selected" : false,
          "title" : "lastName"
        }, {
          "colorRules" : null,
          "dataType" : "DateTime",
          "propertyName" : "timestamp",
          "selected" : false,
          "title" : "timestamp"
        } ],
        "dataStreamGroupedByFiltersString" : "",
        "dataStreamPropertyList" : [ ],
        "dataStreamUUID" : "af8a6783-d4cb-4f32-98f9-0ea7c25f8d11",
        "dataType" : null,
        "h" : 294,
        "headerFontColor" : "#000000",
        "headerFontFace" : "inherit",
        "headerFontSize" : 14,
        "headerFontStyle" : "plain",
        "heightPolicy" : 0,
        "horzGravity" : 4,
        "isDraggable" : true,
        "isSelectable" : true,
        "name" : "DataTable1",
        "operation" : "insert",
        "propertyName" : null,
        "rowsPerPage" : 5,
        "type" : "DataTableWidget",
        "v" : 13,
        "vertGravity" : 4,
        "w" : 863,
        "widthPolicy" : 1,
        "x" : 284,
        "y" : 0
      }, {
        "CSSClass" : "vantiqGauge",
        "actionMenuLabel" : null,
        "actionMenuTopic" : null,
        "borderColor" : "Default",
        "borderWidth" : 2,
        "dataStreamGroupedByFiltersString" : "",
        "dataStreamPropertyList" : [ ],
        "dataStreamUUID" : "05a5aea9-d9e4-473a-8b0a-fbd72be027a1",
        "dataType" : null,
        "h" : 292,
        "heightPolicy" : 1,
        "horzGravity" : 4,
        "isDraggable" : true,
        "isSelectable" : true,
        "maximum" : 1000,
        "minimum" : 0,
        "minorTicks" : 5,
        "name" : "Gauge1",
        "naturalKey" : null,
        "naturalKeyValue" : null,
        "operation" : "insert",
        "propertyName" : "value",
        "redMinimum" : 900,
        "type" : "GaugeWidget",
        "v" : 13,
        "vertGravity" : 4,
        "w" : 292,
        "widthPolicy" : 1,
        "x" : 553,
        "y" : 320,
        "yellowMinimum" : 700
      } ],
      "data" : {
        "properties" : {
          "Invoice" : {
            "defaultLabel" : "Invoice",
            "type" : "TypedObject",
            "typedObject" : {
              "properties" : {
                "ID" : {
                  "defaultLabel" : "ID",
                  "type" : "String"
                },
                "amount" : {
                  "defaultLabel" : "amount",
                  "type" : "Real"
                },
                "description" : {
                  "defaultLabel" : "description",
                  "type" : "String"
                },
                "firstName" : {
                  "defaultLabel" : "firstName",
                  "type" : "String"
                },
                "lastName" : {
                  "defaultLabel" : "lastName",
                  "type" : "String"
                },
                "timestamp" : {
                  "defaultLabel" : "timestamp",
                  "type" : "DateTime"
                }
              },
              "type" : "Invoice"
            }
          }
        }
      },
      "fields" : [ ],
      "footerChildren" : [ ],
      "layoutType" : "browser",
      "responseTopic" : "/my/response/topic"
    }
  }
}